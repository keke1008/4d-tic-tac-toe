# 4D Tic-Tac-Toe - Rotating Tesseract

4次元立方体そのものを回転させてプレイする、3次元では表現不可能な神秘的三目並べゲーム。

**🎮 [今すぐプレイ！](https://keke1008.github.io/4d-tic-tac-toe/)**

## 🌌 特徴

- **回転する4次元立方体**: 256個のセル（4x4x4x4）が4次元空間で実際に回転
- **3次元では不可能な動き**: XW, YW, ZW回転により「内側」と「外側」が入れ替わる
- **リアルタイム4D投影**: 4D→3D→2Dの二段階透視投影で常に変化する視点
- **神秘的なビジュアル**: W軸（第4次元）の位置に応じて色相が変化
- **完全な勝利判定**: 4次元空間での全ての可能な方向（80方向以上）での4目並び

## 🎮 遊び方

### 基本ルール

1. プレイヤーXとOが交互に回転する4次元立方体のセルにマークを配置
2. 4次元空間で4つ並べたプレイヤーが勝利
3. 4x4x4x4 = 256個全てのセルが埋まると引き分け

### 操作方法

- **マウスホバー**: セルに近づくと光る（4次元座標が表示される）
- **クリック**: ホバーしたセルにX/Oを配置
- **回転ボタン**:
  - **XY, XZ, YZ**: 通常の3次元回転
  - **XW, YW, ZW ✨**: 4次元回転（隠れたセルが見えるように！）
- **自動回転**: 4次元回転を自動で実行（XW, YZ, ZW同時回転）
- **回転速度**: 速く/遅くボタンで調整

### 4次元回転の神秘性

このゲームの最大の特徴は**4次元回転**です：

**3次元回転（XY, XZ, YZ）**
- 通常の回転。見慣れた動き。

**4次元回転（XW, YW, ZW）**
- **内側のセルが外側に出てくる** - 3次元では絶対に不可能！
- **色が変化する** - W座標が変わるため、青→紫→青と色相が変化
- **隠れていたセルが見える** - 4次元の「裏側」が表に回転してくる

例：ZW回転をクリックすると、Z軸とW軸が回転します。
これにより、W=0にあったセルがW=3に移動したり、
3次元では「奥」にあったセルが4次元的に「表」に出てきます。

**これが3次元上では表現できない神秘性です！** ✨

### 勝利条件

4次元空間では以下のような並び方で勝利できます：

- **3次元での勝利**: 同じW層内でX, Y, Z軸のいずれかの方向に4つ並べる
- **4次元対角線**: X, Y, Z, W全ての軸が同時に変化する完全な4次元対角線
- **その他80以上の方向**: 4次元空間では3^4 - 1 = 80通りの方向が存在

## 🔮 4次元立方体の仕組み

このゲームの4次元立方体：

- **セル数**: 256個（4×4×4×4）
- **各セル**: 4次元座標 (x, y, z, w) を持つ
- **回転**: 6つの回転平面で実際に4次元回転
- **投影**: 回転後の4次元座標を3次元→2次元へ投影して表示

画面上で見えるのは、4次元空間で回転している256個のセルを、
リアルタイムで2次元スクリーンに投影した姿です。

回転すると：
- セルの位置が4次元空間で変化
- W座標が変わり、色が変化（青←→紫）
- 深度（Z座標）も変化し、手前に来たり奥に行ったり
- **3次元では見られない配置が現れる**

## 🚀 起動方法

### オンラインでプレイ

**👉 [GitHub Pages でプレイ](https://keke1008.github.io/4d-tic-tac-toe/)**

### ローカルで実行

```bash
# ブラウザでindex.htmlを開く
open index.html

# またはローカルサーバーを起動
python -m http.server 8000
# ブラウザで http://localhost:8000 を開く
```

## 🎨 技術詳細

- **4次元データ構造**: 256個のセルそれぞれが4次元座標を保持
- **4次元回転**: 6つの回転平面（XY, XZ, XW, YZ, YW, ZW）での回転行列演算
- **二段階投影**:
  1. 4D → 3D: 透視投影（W軸方向の距離に基づく）
  2. 3D → 2D: 通常の透視投影（Z軸方向の距離に基づく）
- **深度ソート**: Z座標でソートして正しい描画順序を実現
- **レンダリング**: HTML5 Canvas で60fps
- **視覚効果**:
  - W座標に基づく色相変化（4次元の位置を色で表現）
  - 深度に基づく不透明度
  - ホバー時のグローエフェクト

## 📐 4次元回転の数学

4次元空間では6つの独立した回転平面が存在します：

- **XY平面**: 通常の2D回転
- **XZ平面**: 前後の回転
- **YZ平面**: 横方向の回転
- **XW平面**: X軸と第4次元の回転
- **YW平面**: Y軸と第4次元の回転
- **ZW平面**: Z軸と第4次元の回転

これらを組み合わせることで、3次元では不可能な複雑な回転が実現できます。

## 🌟 楽しみ方のヒント

1. **まずは観察**: 自動回転をONにして、4次元回転の神秘的な動きを観察
2. **4次元回転を体験**: XW, YW, ZW回転をクリックして、内側が外側に出てくる様子を確認
3. **色の変化に注目**: W座標が変わると色が変化する - これが4次元の証
4. **戦略を練る**:
   - 回転させて隠れたセルを見つける
   - 4次元対角線を狙う（X, Y, Z, W全てが変化する方向）
   - 相手に見えないところに3つ並べる準備をする
5. **自動回転を止めて**: じっくり考えたいときは自動回転を停止

## 🎯 今後の拡張案

- AIプレイヤーの実装
- より大きなグリッド（5x5x5x5など）
- リプレイ機能
- マルチプレイヤー対応
- VR/AR対応

---

**4次元空間での思考を楽しんでください！** 🌌✨
